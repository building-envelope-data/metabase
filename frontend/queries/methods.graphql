fragment MethodPartial on Method {
  id
  uuid
  name
  description
  validity {
    from
    to
  }
  availability {
    from
    to
  }
  reference {
    abstract
    section
    title
    ... on Standard {
      locator
      numeration {
        mainNumber
        prefix
        suffix
      }
      standardizers
      year
    }
    ... on Publication {
      arXiv
      authors
      doi
      urn
      webAddress
    }
  }
  calculationLocator
  categories
  developers {
    edges {
      node {
        name
        ... on Institution {
          id
          uuid
        }
        ... on User {
          id
          uuid
        }
      }
    }
  }
  manager {
    node {
      id
      uuid
      name
    }
  }
}

query Methods {
  methods {
    nodes {
      ...MethodPartial
    }
  }
}

query Method($uuid: UUID!) {
  method(uuid: $uuid) {
    ...MethodPartial
  }
}

mutation CreateMethod(
  $name: String!
  $description: String!
  $validity: OpenEndedDateTimeRangeInput
  $availability: OpenEndedDateTimeRangeInput
  $standard: CreateStandardInput
  $publication: CreatePublicationInput
  $calculationLocator: URL
  $categories: [MethodCategory!]!
  $managerId: UUID!
  $institutionDeveloperIds: [UUID!]!
  $userDeveloperIds: [UUID!]!
) {
  createMethod(
    input: {
      name: $name
      description: $description
      validity: $validity
      availability: $availability
      standard: $standard
      publication: $publication
      calculationLocator: $calculationLocator
      categories: $categories
      managerId: $managerId
      institutionDeveloperIds: $institutionDeveloperIds
      userDeveloperIds: $userDeveloperIds
    }
  ) {
    method {
      ...MethodPartial
    }
    errors {
      code
      message
      path
    }
  }
}
